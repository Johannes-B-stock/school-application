# Migration `20200419234208-change-casing`

This migration has been generated by Johannes Birkenstock at 4/19/2020, 11:42:08 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `prisma`.`applicationQuestionCollection` (
    `description` varchar(191)   ,
    `id` int NOT NULL  AUTO_INCREMENT,
    `name` varchar(191) NOT NULL  ,
    `type` varchar(191)   ,
    PRIMARY KEY (`id`)
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

ALTER TABLE `prisma`.`address` DROP FOREIGN KEY `address_ibfk_2`;

ALTER TABLE `prisma`.`application` DROP FOREIGN KEY `application_ibfk_2`;

ALTER TABLE `prisma`.`applicationanswer` DROP FOREIGN KEY `applicationanswer_ibfk_1`;

ALTER TABLE `prisma`.`applicationquestion` DROP FOREIGN KEY `applicationquestion_ibfk_1`;

ALTER TABLE `prisma`.`passport` DROP FOREIGN KEY `passport_ibfk_2`,
DROP FOREIGN KEY `passport_ibfk_1`;

ALTER TABLE `prisma`.`school` DROP FOREIGN KEY `school_ibfk_1`;

ALTER TABLE `prisma`.`staff` DROP FOREIGN KEY `staff_ibfk_1`;

ALTER TABLE `prisma`.`address` ADD FOREIGN KEY (`userId`) REFERENCES `prisma`.`user`(`id`) ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE `prisma`.`application` ADD FOREIGN KEY (`schoolId`) REFERENCES `prisma`.`school`(`id`) ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE `prisma`.`applicationanswer` ADD FOREIGN KEY (`applicationId`) REFERENCES `prisma`.`application`(`id`) ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE `prisma`.`applicationquestion` ADD FOREIGN KEY (`questionCollectionId`) REFERENCES `prisma`.`applicationQuestionCollection`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `prisma`.`passport` ADD FOREIGN KEY (`birthNationId`) REFERENCES `prisma`.`nation`(`id`) ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE `prisma`.`passport` ADD FOREIGN KEY (`userId`) REFERENCES `prisma`.`user`(`id`) ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE `prisma`.`school` ADD FOREIGN KEY (`applicationQuestionsId`) REFERENCES `prisma`.`applicationQuestionCollection`(`id`) ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE `prisma`.`staff` ADD FOREIGN KEY (`currentSchoolId`) REFERENCES `prisma`.`school`(`id`) ON DELETE SET NULL ON UPDATE CASCADE

DROP TABLE `prisma`.`_migration`;

DROP TABLE `prisma`.`applicationquestioncollection`;

ALTER TABLE `prisma`.`user_information` RENAME INDEX `userId` TO `user_information.userId`
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200419225909-try-migrate..20200419234208-change-casing
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "mysql"
-  url = "***"
+  url      = env("DB_URL")
 }
 model address {
   city     String?
@@ -20,68 +20,96 @@
   zip      String?
   nation   nation? @relation(fields: [nationId], references: [id])
   user     user?   @relation(fields: [userId], references: [id])
-  @@index([nationId], name: "nation")
-  @@index([userId], name: "user")
+  @@index([nationId], name: "nationId")
+  @@index([userId], name: "userId")
 }
-model applicationAdminNote {
-  schoolApplicationId Int
-  authorId            Int?
-  created             DateTime?         @default(now())
-  id                  Int               @default(autoincrement()) @id
-  modified            DateTime?
-  note                String?
-  schoolApplication   schoolApplication @relation(fields: [schoolApplicationId], references: [id])
-  author              user?             @relation(fields: [authorId], references: [id])
+model application {
+  accepted              Boolean?               @default(false)
+  acceptedDate          DateTime?
+  adminNotes            String?
+  arrivedDate           DateTime?
+  canceledDate          DateTime?
+  created               DateTime?              @default(now())
+  id                    Int                    @default(autoincrement()) @id
+  inReviewDate          DateTime?
+  isStaffApplication    Boolean?               @default(false)
+  packetSent            Boolean?               @default(false)
+  postcardSent          Boolean?               @default(false)
+  progress              String?
+  retiredDate           DateTime?
+  schoolId              Int?
+  status                String?
+  submitDate            DateTime?
+  transferredFromSchool Int?
+  userId                Int
+  school                school?                @relation(fields: [schoolId], references: [id])
+  user                  user                   @relation(fields: [userId], references: [id])
+  applicationadminnote  applicationadminnote[]
+  applicationanswer     applicationanswer[]
+  applicationhistory    applicationhistory[]
+  email                 email[]
+  reference             reference[]
-  @@index([schoolApplicationId], name: "application")
-  @@index([authorId], name: "author")
+  @@index([schoolId], name: "schoolId")
+  @@index([userId], name: "userId")
 }
-model applicationAnswer {
-  answer              String?
-  schoolApplicationId Int?
-  staffApplicationId  Int?
-  id                  Int                @default(autoincrement()) @id
-  question            String?
-  schoolApplication   schoolApplication? @relation(fields: [schoolApplicationId], references: [id])
-  staffApplication    staffApplication?  @relation(fields: [staffApplicationId], references: [id])
+model applicationadminnote {
+  applicationId Int
+  author        Int?
+  created       DateTime?   @default(now())
+  id            Int         @default(autoincrement()) @id
+  modified      DateTime?
+  note          String?
+  application   application @relation(fields: [applicationId], references: [id])
+  user          user?       @relation(fields: [author], references: [id])
-  @@index([schoolApplicationId], name: "schoolApplication")
-  @@index([staffApplicationId], name: "staffApplication")
+  @@index([applicationId], name: "applicationId")
+  @@index([author], name: "author")
 }
-model applicationHistory {
+model applicationanswer {
+  answer        String?
+  applicationId Int?
+  id            Int          @default(autoincrement()) @id
+  question      String?
+  application   application? @relation(fields: [applicationId], references: [id])
+
+  @@index([applicationId], name: "applicationId")
+}
+
+model applicationhistory {
   action        String?
   applicationId Int
-  created       DateTime?         @default(now())
+  created       DateTime?   @default(now())
   error         String?
   field         String?
-  id            Int               @default(autoincrement()) @id
+  id            Int         @default(autoincrement()) @id
   statusNum     String?
   value         String?
-  application   schoolApplication @relation(fields: [applicationId], references: [id])
+  application   application @relation(fields: [applicationId], references: [id])
-  @@index([applicationId], name: "application")
+  @@index([applicationId], name: "applicationId")
 }
-model applicationQuestion {
-  id                   Int                           @default(autoincrement()) @id
-  question             String?
-  questionCollectionId Int
-  questionCollection   applicationQuestionCollection @relation(fields: [questionCollectionId], references: [id])
+model applicationquestion {
+  id                            Int                           @default(autoincrement()) @id
+  question                      String?
+  questionCollectionId          Int
+  applicationQuestionCollection applicationQuestionCollection @relation(fields: [questionCollectionId], references: [id])
-  @@index([questionCollectionId], name: "questionCollection")
+  @@index([questionCollectionId], name: "questionCollectionId")
 }
 model applicationQuestionCollection {
   description         String?
   id                  Int                   @default(autoincrement()) @id
   name                String
   type                String?
-  applicationQuestion applicationQuestion[]
+  applicationquestion applicationquestion[]
   school              school[]
 }
 model attachments {
@@ -101,77 +129,81 @@
   width         String
   school        school? @relation(fields: [schoolId], references: [id])
   user          user?   @relation(fields: [userId], references: [id])
-  @@index([schoolId], name: "school")
-  @@index([userId], name: "user")
+  @@index([schoolId], name: "schoolId")
+  @@index([userId], name: "userId")
 }
 model child {
   birthday String?
   gender   String?
   id       Int     @default(autoincrement()) @id
   name     String?
-  user     Int
-  parent   user    @relation(fields: [user], references: [id])
+  parent   Int
+  user     user    @relation(fields: [parent], references: [id])
-  @@index([user], name: "user")
+  @@index([parent], name: "parent")
 }
 model email {
-  allStaff          Boolean
-  application       Int?
-  contents          String?
-  created           DateTime?          @default(now())
-  group             Int?
-  id                Int                @default(autoincrement()) @id
-  modified          DateTime?
-  schoolId          Int?
-  sendAt            DateTime?          @default(now())
-  sentDate          DateTime?          @default(now())
-  subject           String?
-  to                String?
-  type              String
-  schoolApplication schoolApplication? @relation(fields: [application], references: [id])
-  school            school?            @relation(fields: [schoolId], references: [id])
+  allStaff      Boolean
+  applicationId Int?
+  contents      String?
+  created       DateTime?    @default(now())
+  group         Int?
+  id            Int          @default(autoincrement()) @id
+  modified      DateTime?
+  schoolId      Int?
+  sendAt        DateTime?    @default(now())
+  sentDate      DateTime?    @default(now())
+  subject       String?
+  to            String?
+  type          String
+  application   application? @relation(fields: [applicationId], references: [id])
+  school        school?      @relation(fields: [schoolId], references: [id])
-  @@index([application], name: "application")
-  @@index([schoolId], name: "school")
+  @@index([applicationId], name: "applicationId")
+  @@index([schoolId], name: "schoolId")
 }
 model nation {
-  deuVisa       Boolean
-  deuVisaBefore Boolean
-  extraQ        Int
-  id            Int        @default(autoincrement()) @id
-  iso2          String
-  iso3          String
-  nameDeu       String?
-  nameEn        String
-  address       address[]
-  passport      passport[]
+  deuVisa                                 Boolean
+  deuVisaBefore                           Boolean
+  extraQ                                  Int
+  id                                      Int        @default(autoincrement()) @id
+  iso2                                    String
+  iso3                                    String
+  nameDeu                                 String?
+  nameEn                                  String
+  address                                 address[]
+  passport_nationTopassport_birthNationId passport[] @relation("nationTopassport_birthNationId")
+  passport_nationTopassport_nationId      passport[] @relation("nationTopassport_nationId")
 }
 model passport {
-  authority  String?
-  birthCity  String?
-  expire     DateTime?
-  firstName  String?
-  id         Int       @default(autoincrement()) @id
-  issue      DateTime?
-  lastName   String?
-  middleName String
-  nationId   Int?
-  number     String?
-  userId     Int?
-  nation     nation?   @relation(fields: [nationId], references: [id])
-  user       user?     @relation(fields: [userId], references: [id])
+  authority                             String?
+  birthCity                             String?
+  birthNationId                         Int?
+  expire                                DateTime?
+  firstName                             String?
+  id                                    Int       @default(autoincrement()) @id
+  issue                                 DateTime?
+  lastName                              String?
+  middleName                            String
+  nationId                              Int?
+  number                                String?
+  userId                                Int?
+  nation_nationTopassport_birthNationId nation?   @relation("nationTopassport_birthNationId", fields: [birthNationId], references: [id])
+  nation_nationTopassport_nationId      nation?   @relation("nationTopassport_nationId", fields: [nationId], references: [id])
+  user                                  user?     @relation(fields: [userId], references: [id])
-  @@index([nationId], name: "nation")
-  @@index([userId], name: "user")
+  @@index([birthNationId], name: "birthNationId")
+  @@index([nationId], name: "nationId")
+  @@index([userId], name: "userId")
 }
-model permissions {
+model permission {
   created     DateTime? @default(now())
   description String
   id          Int       @default(autoincrement()) @id
   modified    DateTime?
@@ -179,26 +211,26 @@
 }
 model reference {
   ambition          Int
-  application       Int
+  applicationId     Int
   christian         String
   churchLife        String
   communication     Int
   conflict          String
-  created           DateTime?         @default(now())
+  created           DateTime?   @default(now())
   email             String
   emailBy           Int
-  emailDate         DateTime?         @default(now())
+  emailDate         DateTime?   @default(now())
   emotion           Int
   family            String
   forAdventure      Boolean
   formIn            Boolean
   getEquipped       Boolean
   getHelp           Boolean
   hash              String
   howWell           String
-  id                Int               @default(autoincrement()) @id
+  id                Int         @default(autoincrement()) @id
   initiative        Int
   ipAddress         String
   lang              String
   leadership        Int
@@ -209,9 +241,9 @@
   other             String
   phone             String
   punctual          Int
   received          Int
-  receivedDate      DateTime?         @default(now())
+  receivedDate      DateTime?   @default(now())
   refNum            Int
   relation          String
   reliable          Int
   selfDis           Int
@@ -225,115 +257,63 @@
   toGrow            Boolean
   userGivenRelation String
   weakness          String
   whySchool         String
-  schoolApplication schoolApplication @relation(fields: [application], references: [id])
+  application       application @relation(fields: [applicationId], references: [id])
-  @@index([application], name: "application")
+  @@index([applicationId], name: "applicationId")
 }
 model school {
-  accountingName         String?
-  acronym                String?
-  applicationFee         Float                          @default(0)
-  applicationQuestionsId Int?
-  created                DateTime?                      @default(now())
-  currency               String?
-  description            String?
-  endDate                DateTime?
-  foodDayStudent         Float                          @default(0)
-  hashtag                String?
-  id                     Int                            @default(autoincrement()) @id
-  miniOutreachEndDate    DateTime?
-  miniOutreachFee        Float                          @default(0)
-  miniOutreachStartDate  DateTime?
-  modified               DateTime?
-  name                   String?
-  online                 Boolean?                       @default(true)
-  outreachEndDate        DateTime?
-  outreachFee            Float                          @default(0)
-  outreachStartDate      DateTime?
-  schoolEmail            String?
-  schoolFee              Float                          @default(0)
-  secondary              Boolean?
-  startDate              DateTime?
-  travelNotice           String?
-  url                    String?
-  applicationQuestions   applicationQuestionCollection? @relation(fields: [applicationQuestionsId], references: [id])
-  attachments            attachments[]
-  email                  email[]
-  schoolApplication      schoolApplication[]
-  staff                  staff[]
-  student                student[]
+  accountingName                String?
+  acronym                       String?
+  applicationFee                Float                          @default(0)
+  applicationQuestionsId        Int?
+  created                       DateTime?                      @default(now())
+  currency                      String?
+  description                   String?
+  endDate                       DateTime?
+  foodDayStudent                Float                          @default(0)
+  hashtag                       String?
+  id                            Int                            @default(autoincrement()) @id
+  miniOutreachEndDate           DateTime?
+  miniOutreachFee               Float                          @default(0)
+  miniOutreachStartDate         DateTime?
+  modified                      DateTime?
+  name                          String?
+  online                        Boolean?                       @default(true)
+  outreachEndDate               DateTime?
+  outreachFee                   Float                          @default(0)
+  outreachStartDate             DateTime?
+  schoolEmail                   String?
+  schoolFee                     Float                          @default(0)
+  secondary                     Boolean?
+  startDate                     DateTime?
+  travelNotice                  String?
+  url                           String?
+  applicationQuestionCollection applicationQuestionCollection? @relation(fields: [applicationQuestionsId], references: [id])
+  application                   application[]
+  attachments                   attachments[]
+  email                         email[]
+  staff                         staff[]
+  student                       student[]
-  @@index([applicationQuestionsId], name: "applicationQuestions")
+  @@index([applicationQuestionsId], name: "applicationQuestionsId")
 }
-model schoolApplication {
-  accepted              Boolean?               @default(false)
-  acceptedDate          DateTime?
-  adminNotes            String?
-  arrivedDate           DateTime?
-  canceledDate          DateTime?
-  created               DateTime?              @default(now())
-  id                    Int                    @default(autoincrement()) @id
-  inReviewDate          DateTime?
-  packetSent            Boolean?               @default(false)
-  postcardSent          Boolean?               @default(false)
-  progress              String?
-  retiredDate           DateTime?
-  schoolId              Int
-  status                String?
-  submitDate            DateTime?
-  transferredFromSchool Int?
-  userId                Int
-  school                school                 @relation(fields: [schoolId], references: [id])
-  user                  user                   @relation(fields: [userId], references: [id])
-  applicationAdminNote  applicationAdminNote[]
-  applicationAnswer     applicationAnswer[]
-  applicationHistory    applicationHistory[]
-  email                 email[]
-  reference             reference[]
-
-  @@index([schoolId], name: "school")
-  @@index([userId], name: "user")
-}
-
 model staff {
-  admin    Boolean? @default(false)
-  id       Int      @default(autoincrement()) @id
-  name     String?
-  schoolId Int
-  userId   Int?
-  school   school   @relation(fields: [schoolId], references: [id])
-  user     user?    @relation(fields: [userId], references: [id])
+  admin           Boolean? @default(false)
+  currentSchoolId Int?
+  id              Int      @default(autoincrement()) @id
+  name            String?
+  userId          Int?
+  school          school?  @relation(fields: [currentSchoolId], references: [id])
+  user            user?    @relation(fields: [userId], references: [id])
-  @@index([schoolId], name: "school")
-  @@index([userId], name: "user")
+  @@index([currentSchoolId], name: "currentSchoolId")
+  @@index([userId], name: "userId")
 }
-model staffApplication {
-  accepted          String?
-  acceptedDate      DateTime?
-  arrivedDate       DateTime?
-  canceledDate      DateTime?
-  created           DateTime?           @default(now())
-  id                Int                 @default(autoincrement()) @id
-  inReviewDate      DateTime?
-  packetSent        String?
-  postcardSent      String?
-  progress          String?
-  retiredDate       DateTime?
-  status            String?
-  submitDate        DateTime?
-  type              String?
-  userId            Int
-  user              user                @relation(fields: [userId], references: [id])
-  applicationAnswer applicationAnswer[]
-
-  @@index([userId], name: "user")
-}
-
 model student {
   arrived   Boolean?
   canceled  Boolean?
   graduated Boolean?
@@ -364,24 +344,21 @@
   modified             DateTime?
   password             String?
   role                 Int?                   @default(0)
   address              address[]
-  applicationAdminNote applicationAdminNote[]
+  application          application[]
+  applicationadminnote applicationadminnote[]
   attachments          attachments[]
   child                child[]
   passport             passport[]
-  schoolApplication    schoolApplication[]
   staff                staff[]
-  staffApplication     staffApplication[]
   student              student[]
-  userInformation      userInformation?
+  user_information     user_information?
 }
-model userInformation {
+model user_information {
   children           Int?
   emRelation         String?
-  emContactId        Int?
-  emContact          address?  @relation(fields: [emContactId], references: [id])
   eyeColor           String?
   facebook           String?
   firstLanguage      String?
   glutenAllergy      Boolean   @default(false)
@@ -400,16 +377,16 @@
   otherFoodAllergy   String?
   otherLanguage      String?
   otherLanguagePro   Int?
   physicalDisability Boolean   @default(false)
-  userId             Int       @unique
   secondLanguage     String?
   secondLanguagePro  Int?
   shots              String?
   spouseName         String?
   talents            String?
   thirdLanguage      String?
   thirdLanguagePro   Int?
+  userId             Int       @unique
   website            String?
   youtube            String?
   user               user      @relation(fields: [userId], references: [id])
 }
```


