(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{111:function(e,t,a){e.exports=a(127)},116:function(e,t,a){},117:function(e,t,a){},127:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),i=a.n(o),l=(a(116),a(11)),c=a(35),u=(a(117),a(29)),s=a(27),m=a(166),d=a(169),p=a(170),v=a(128),g=a(161),f=a(186),b=a(167),h=a(187),E=a(164),y=a(165),O=a(15),j=a(171),S=a(172);function w(){var e=Object(u.a)(["\n  query getSchools {\n    getSchools {\n      id\n      name\n      description\n      startDate\n      endDate\n      acronym\n      schoolEmail\n      outreachStartDate\n      outreachEndDate\n    }\n  }\n"]);return w=function(){return e},e}var N=Object(s.b)(w()),x=Object(g.a)((function(e){return Object(f.a)({card:{minWidth:375,maxWidth:450,margin:30,boxShadow:e.shadows[3]},root:{flexGrow:1},avatar:{width:e.spacing(10),height:e.spacing(10),color:e.palette.getContrastText(E.a[500]),backgroundColor:E.a[500],fontSize:32,marginLeft:"auto",marginRight:"auto"},lightGreen:{color:e.palette.getContrastText(E.a[500]),backgroundColor:E.a[500]},blue:{color:e.palette.getContrastText(y.a[500]),backgroundColor:y.a[500]},description:{marginTop:12}})}));function I(){var e=Object(m.b)(N),t=e.loading,a=e.error,n=e.data,o=x();return t?r.a.createElement("div",null,"Schools Loading"):a?r.a.createElement("span",null,"Error! $",a.message):r.a.createElement(b.a,{container:!0,className:o.root,spacing:1},r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(b.a,{container:!0,justify:"center",spacing:1},n.getSchools.map((function(e){return r.a.createElement(b.a,{key:e.id,item:!0},r.a.createElement(d.a,{className:o.card},r.a.createElement(p.a,null,r.a.createElement(h.a,{className:"".concat(o.avatar," ").concat("dts"===e.acronym?o.lightGreen:o.blue)},e.acronym),r.a.createElement(v.a,{variant:"h4",align:"center",gutterBottom:!0},e.name),r.a.createElement(v.a,{variant:"subtitle1",align:"center"},new Date(e.startDate).toLocaleDateString()," -"," "+new Date(e.endDate).toLocaleDateString()),r.a.createElement("div",{className:o.description},r.a.createElement(v.a,{variant:"body2",color:"textSecondary",component:"p"},e.description))),r.a.createElement(j.a,null,r.a.createElement(S.a,{component:O.b,to:"/school/"+e.id+"/apply",size:"small",color:"primary"},"Apply"))))})))))}var k=a(21),C=a(173),D=a(174),q=a(175),A=a(188),U=a(96),W=a(95),F=a.n(W),T=a(94),L=a.n(T),B=Object(g.a)((function(e){return Object(f.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},link:{margin:e.spacing(1,1.5)}})}));function R(e){var t=e.user,a=e.setUser,r=e.resetStore,o=B(),i=void 0!==t,c=Object(n.useState)(null),u=Object(l.a)(c,2),s=u[0],m=u[1],d=Boolean(s),p=function(){m(null)};return n.createElement("div",{className:o.root},n.createElement(C.a,{position:"static",color:"primary"},n.createElement(D.a,null,n.createElement(q.a,{edge:"start",className:o.menuButton,color:"inherit","aria-label":"menu"},n.createElement(L.a,null)),n.createElement(v.a,{variant:"h6",className:o.title},"School Application"),n.createElement("nav",null,n.createElement(S.a,{component:O.b,to:"/home",color:"inherit",className:o.link},"Home"),t&&"ADMIN"===(null===t||void 0===t?void 0:t.role)&&n.createElement(S.a,{component:O.b,color:"inherit",to:"/admin",className:o.link},"Admin")),i?n.createElement("div",null,n.createElement(q.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){m(e.currentTarget)},color:"inherit"},n.createElement(F.a,null)),n.createElement(U.a,{id:"menu-appbar",anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:d,onClose:p},n.createElement(A.a,{component:O.b,to:"/profile",onClick:p},"Profile"),n.createElement(A.a,{onClick:p},"My account"),n.createElement(A.a,{onClick:function(){p(),localStorage.removeItem("user"),a(void 0),r()}},"Logout"))):n.createElement("span",null,n.createElement(S.a,{component:O.b,color:"inherit",to:"/login"},"Login"),n.createElement(S.a,{component:O.b,color:"inherit",to:"/register"},"Signup")))))}var $=a(38),J=a(97),V=a(181),G=a(180),H=a(65),M=a(33),Y=a.n(M),z=a(46),P=a(177),_=a(183),Q=a(178),K=a(185),X=a(182),Z=a(63),ee=a.n(Z),te=a(176),ae=a(184);function ne(){var e=Object(u.a)(["\n  mutation loginUser($input: InputLogin!) {\n    loginUser(input: $input) {\n      id\n      firstName\n      token\n      role\n    }\n  }\n"]);return ne=function(){return e},e}function re(){return r.a.createElement(v.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(O.b,{color:"inherit",to:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")}var oe=Object(g.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),ie=Object(s.b)(ne());function le(e){var t=e.user,a=e.setUser,o=e.history;t&&o.goBack();var i=oe(),u=Object(n.useState)(void 0),s=Object(l.a)(u,2),d=s[0],p=s[1],g=Object(n.useState)(""),f=Object(l.a)(g,2),E=f[0],y=f[1],j=Object(n.useState)(""),w=Object(l.a)(j,2),N=w[0],x=w[1];var I=Object(m.a)(ie),k=Object(l.a)(I,1)[0];function C(){return(C=Object(z.a)(Y.a.mark((function e(t){var n,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,k({variables:{input:{email:E,password:N}}});case 4:(n=e.sent).errors&&p(n.errors.join(",")),void 0===n.data?p("no user data arrived from server."):(r=Object(c.a)({},n.data.loginUser),localStorage.setItem("user",JSON.stringify(r)),a(r)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),p(e.t0.toString());case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return r.a.createElement(te.a,{component:"main",maxWidth:"xs"},d&&r.a.createElement(ae.a,{elevation:6,variant:"filled",severity:"warning"},d),r.a.createElement(P.a,null),r.a.createElement("div",{className:i.paper},r.a.createElement(h.a,{className:i.avatar},r.a.createElement(ee.a,null)),r.a.createElement(v.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:i.form,noValidate:!0,onSubmit:function(e){return C.apply(this,arguments)}},r.a.createElement(_.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:E,onChange:function(e){return y(e.target.value)}}),r.a.createElement(_.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:N,onChange:function(e){return x(e.target.value)}}),r.a.createElement(Q.a,{control:r.a.createElement(K.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(S.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:i.submit,disabled:!(E.length>0&&N.length>0)},"Sign In"),r.a.createElement(b.a,{container:!0},r.a.createElement(b.a,{item:!0,xs:!0},r.a.createElement(O.b,{to:"#"},"Forgot password?")),r.a.createElement(b.a,{item:!0},r.a.createElement(O.b,{to:"/register"},"Don't have an account? Sign Up"))))),r.a.createElement(X.a,{mt:8},r.a.createElement(re,null)))}function ce(){var e=Object(u.a)(["\n  mutation registerUser($input: InputRegisterUser!) {\n    registerUser(input: $input) {\n      id\n      token\n      firstName\n      role\n    }\n  }\n"]);return ce=function(){return e},e}function ue(){return r.a.createElement(v.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(O.b,{color:"inherit",to:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")}var se=Object(g.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),me=Object(s.b)(ce());function de(e){var t=e.user,a=e.setUser,o=e.history;t&&o.goBack();var i=se(),u=Object(n.useState)(void 0),s=Object(l.a)(u,2),d=s[0],p=s[1],g=Object(n.useState)(""),f=Object(l.a)(g,2),b=f[0],E=f[1],y=Object(n.useState)(""),O=Object(l.a)(y,2),j=O[0],w=O[1],N=Object(n.useState)(""),x=Object(l.a)(N,2),I=x[0],k=x[1],C=Object(n.useState)(""),D=Object(l.a)(C,2),q=D[0],A=D[1];var U=Object(m.a)(me),W=Object(l.a)(U,1)[0];function F(){return(F=Object(z.a)(Y.a.mark((function e(t){var n,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),p(void 0),e.prev=2,e.next=5,W({variables:{input:{email:b,password:q,firstName:j,lastName:I}}});case 5:(n=e.sent).errors&&p(n.errors.join(",")),void 0===(null===n||void 0===n?void 0:n.data)?p("No User data arrived from server."):(r=Object(c.a)({},n.data),localStorage.setItem("user",JSON.stringify(r)),a(r)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),p(e.t0.toString());case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}return r.a.createElement(te.a,{component:"main",maxWidth:"xs"},d&&r.a.createElement(ae.a,{elevation:6,variant:"filled",severity:"warning"},d),r.a.createElement(P.a,null),r.a.createElement("div",{className:i.paper},r.a.createElement(h.a,{className:i.avatar},r.a.createElement(ee.a,null)),r.a.createElement(v.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:i.form,noValidate:!0,onSubmit:function(e){return F.apply(this,arguments)}},r.a.createElement(_.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"firstName",label:"First Name",name:"firstName",autoComplete:"firstName",autoFocus:!0,value:j,onChange:function(e){return w(e.target.value)}}),r.a.createElement(_.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lastName",value:I,onChange:function(e){return k(e.target.value)}}),r.a.createElement(_.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:b,onChange:function(e){return E(e.target.value)}}),r.a.createElement(_.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:q,onChange:function(e){return A(e.target.value)}}),r.a.createElement(S.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:i.submit,disabled:!(b.length>0&&q.length>0&&b.includes("@"))},"Register"))),r.a.createElement(X.a,{mt:8},r.a.createElement(ue,null)))}var pe=a(25),ve=a(179);function ge(){var e=Object(u.a)(["\n  query getUser {\n    getUser {\n      id\n      firstName\n      lastName\n      fullName\n      role\n    }\n  }\n"]);return ge=function(){return e},e}var fe=Object(s.b)(ge()),be=Object(g.a)((function(e){return Object(f.a)({root:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:e.spacing(3),width:"25ch"},errorMessage:{marginTop:e.spacing(10),marginLeft:e.spacing(1),marginRight:e.spacing(1)}})}));function he(e){var t,a,n,o,i=e.user,l=be(),c=Object(m.b)(fe),u=c.loading,s=c.error,d=c.data;return i?(null===d||void 0===d||null===(t=d.getUser)||void 0===t?void 0:t.id)!==(null===i||void 0===i?void 0:i.id)&&"ADMIN"!==(null===i||void 0===i?void 0:i.role)?r.a.createElement(te.a,{component:"main",maxWidth:"md"},r.a.createElement(ae.a,{elevation:6,variant:"filled",severity:"warning"},"You don't have the rights to see this profile.")):(console.log(d),r.a.createElement(te.a,{component:"main",maxWidth:"md"},r.a.createElement("div",{className:l.root},s&&r.a.createElement(ae.a,{elevation:6,variant:"filled",severity:"error"},s.message),u?r.a.createElement(ve.a,null):r.a.createElement("div",null,r.a.createElement(v.a,{variant:"h4",gutterBottom:!0},"Hello ",null===i||void 0===i?void 0:i.firstName,"!"),r.a.createElement(v.a,{variant:"body1",gutterBottom:!0},"This is your profile page. Here you can edit your information."),r.a.createElement(_.a,{label:"First Name",id:"margin-none",defaultValue:null===d||void 0===d||null===(a=d.getUser)||void 0===a?void 0:a.firstName,className:l.textField}),r.a.createElement(_.a,{label:"Last Name",id:"margin-none",defaultValue:null===d||void 0===d||null===(n=d.getUser)||void 0===n?void 0:n.lastName,className:l.textField}),r.a.createElement(_.a,{label:"Full Name",id:"margin-none",defaultValue:null===d||void 0===d||null===(o=d.getUser)||void 0===o?void 0:o.fullName,className:l.textField})),r.a.createElement(P.a,null)))):r.a.createElement($.a,{to:"/login"})}var Ee=a(22);function ye(){var e=Object(u.a)(["\n  mutation createApplication($input: InputCreateSchoolApplication!) {\n    createSchoolApplication(input: $input) {\n      id\n    }\n  }\n"]);return ye=function(){return e},e}function Oe(){var e=Object(u.a)(["\n  query getSchoolInfo($schoolId: Int!) {\n    getSchoolInfoForApplication(schoolId: $schoolId) {\n      id\n      acronym\n      name\n      online\n      description\n      questions {\n        id\n        question\n      }\n    }\n  }\n"]);return Oe=function(){return e},e}var je=Object(s.b)(Oe()),Se=Object(s.b)(ye()),we=Object(g.a)((function(e){return Object(f.a)({root:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:e.spacing(3),width:"150ch"},submit:{margin:e.spacing(3,1,2)}})}));function Ne(e){var t,a,o,i=e.user,u=Object($.g)().id,s=we(),d=Object(n.useState)(void 0),p=Object(l.a)(d,2),g=p[0],f=p[1],b=Object(n.useState)(void 0),h=Object(l.a)(b,2),E=h[0],y=h[1],O=[],j=Object(n.useState)([]),w=Object(l.a)(j,2),N=w[0],x=w[1],I=Object(m.a)(Se),k=Object(l.a)(I,1)[0];function C(){return N.length>0&&N.every((function(e){return e.answer&&e.answer.length>0}))&&N.length===O.length}function D(){return(D=Object(z.a)(Y.a.mark((function e(t){var a,n,r,o;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),f(void 0),C()){e.next=5;break}return f("you have to fill out all questions before you can continue"),e.abrupt("return");case 5:return e.prev=5,e.next=8,k({variables:{input:{schoolId:Number(u),userId:Number(null===i||void 0===i?void 0:i.id),answers:Object(Ee.a)(N.map((function(e){return Object(c.a)({},e)})))}}});case 8:n=e.sent,r=n.data,(o=n.errors)&&f(o.map((function(e){return e.message})).join(";")),(null===r||void 0===r||null===(a=r.createSchoolApplication)||void 0===a?void 0:a.id)&&y(r.createSchoolApplication.id),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),f(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})))).apply(this,arguments)}var q=Object(m.b)(je,{variables:{schoolId:Number(u)}}),A=q.loading,U=q.error,W=q.data;return(null===W||void 0===W||null===(t=W.getSchoolInfoForApplication)||void 0===t?void 0:t.questions)&&(O=W.getSchoolInfoForApplication.questions),void 0===i?r.a.createElement($.a,{to:"/login"}):r.a.createElement(te.a,{component:"main",maxWidth:"md"},r.a.createElement("div",{className:s.root},E&&r.a.createElement(ae.a,{elevation:6,variant:"filled",severity:"success"},"Application with ID ",E," was created."),A&&r.a.createElement(ve.a,null),U&&r.a.createElement(ae.a,{elevation:6,variant:"filled",severity:"warning"},U.message),g&&r.a.createElement(ae.a,{elevation:6,variant:"filled",severity:"error"},g),r.a.createElement(v.a,{component:"h1",variant:"h5"},"Application for ",null===W||void 0===W||null===(a=W.getSchoolInfoForApplication)||void 0===a?void 0:a.name," (",null===W||void 0===W||null===(o=W.getSchoolInfoForApplication)||void 0===o?void 0:o.acronym,")"),r.a.createElement(v.a,{variant:"subtitle1",gutterBottom:!0},"Start your adventure now!"),r.a.createElement(v.a,{variant:"body1",gutterBottom:!0},"Please fill out all the questions that are necessary for applying."),O&&r.a.createElement("form",{noValidate:!0,onSubmit:function(e){return D.apply(this,arguments)}},O.map((function(e){var t,a;return e&&r.a.createElement("div",null,r.a.createElement(_.a,{key:e.id.toString(),id:e.id.toString(),label:null!==(t=e.question)&&void 0!==t?t:"",multiline:!0,required:!0,fullWidth:!0,value:null===(a=N.find((function(t){return t.questionId===e.id})))||void 0===a?void 0:a.answer,onChange:function(t){return function(e,t,a){x((function(n){return[].concat(Object(Ee.a)(n.filter((function(t){return t.questionId!==e}))),[{questionId:e,answer:a,question:t}])}))}(e.id,e.question,t.target.value)},variant:"outlined",className:s.textField}))})),r.a.createElement(S.a,{type:"submit",variant:"contained",color:"primary",className:s.submit},"Create Application"))))}var xe=localStorage.getItem("user"),Ie=null===xe?void 0:JSON.parse(xe),ke=null===Ie||void 0===Ie?void 0:Ie.token,Ce=new s.a({uri:"/graphql",headers:{token:ke},onError:function(e){var t,a=e.graphQLErrors,n=(e.networkError,e.operation),r=e.forward;if(a){var o=!0,i=!1,l=void 0;try{for(var u,s=a[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var m;switch(null===(t=u.value.extensions)||void 0===t?void 0:t.code){case"UNAUTHENTICATED":var d=n.getContext().headers;return n.setContext({headers:Object(c.a)({},d)}),localStorage.removeItem("user"),r(n);case"ANOTHER_ERROR_CODE":break;default:return r(n)}}}catch(m){i=!0,l=m}finally{try{o||null==s.return||s.return()}finally{if(i)throw l}}}return r(n)}});function De(){Ce.resetStore()}var qe=Object(pe.a)(),Ae=Object(J.a)({palette:{primary:G.a,secondary:H.a}});var Ue=function(){var e=localStorage.getItem("user"),t=null===e?void 0:JSON.parse(e),a=Object(n.useState)(t),o=Object(l.a)(a,2),i=o[0],c=o[1];return r.a.createElement(V.a,{theme:Ae},r.a.createElement(O.a,null,r.a.createElement(k.a,{client:Ce},r.a.createElement(R,{user:i,setUser:c,resetStore:De}),r.a.createElement($.d,null,r.a.createElement($.a,{exact:!0,from:"/",to:"/home"}),r.a.createElement($.b,{exact:!0,path:"/home"},r.a.createElement(I,null)),r.a.createElement($.b,{exact:!0,path:"/schools"},r.a.createElement(I,null)),r.a.createElement($.b,{path:"/login",exact:!0},r.a.createElement(le,{user:i,setUser:c,history:qe})),r.a.createElement($.b,{path:"/register",exact:!0},r.a.createElement(de,{user:i,setUser:c,history:qe})),r.a.createElement($.b,{path:"/profile",exact:!0},r.a.createElement(he,{user:i})),r.a.createElement($.b,{path:"/school/:id/apply"},r.a.createElement(Ne,{user:i}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[111,1,2]]]);
//# sourceMappingURL=main.7472ca66.chunk.js.map